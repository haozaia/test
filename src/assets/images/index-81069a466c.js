$(function(){function n(){e(function(n){o(n);var e=$("#marquee");e.on({mouseenter:function(){p=!1},mouseleave:function(){p=!0;for(var n=0,a=v.length;n<a;n++)window.clearInterval(v[n]);v.push(window.setInterval(i,_))}}),e.stop().slideDown(function(){$(this).removeClass("collapse")});var t=0,r=0;for(t=0,r=v.length;t<r;t++)window.clearInterval(v[t]);for(v.push(window.setInterval(i,_)),t=0,r=h.length;t<r;t++)window.clearInterval(h[t]);h=[],h.push(window.setInterval(a,m))})}function a(){!0===c&&e(function(n){var a=$("#marquee").find(".marquee-item"),e=0,o=0,i=0,t=0;for(e=0,o=a.length;e<o;e++){var r=$(a[e]).attr("data-stCode")||"";for(i=0,t=n.length;i<t;i++)if(n[i].stockCode===r){$(a[e]).find(".marquee-index").html(n[i].currentPrice||"--"),$(a[e]).find(".marquee-ratio").html(n[i].rise||"--");var l="";l="1"===n[i].riseFlag?"rise-up":"0"===n[i].riseFlag?"fall-down":parseFloat(n[i].rise)<0?"fall-down":"rise-up",$(a[e]).removeClass("fall-down").removeClass("rise-up").addClass(l);break}}})}function e(n){var a={isReduce:config.isReduce},e=[];syAjax({ifProxy:!0,proxyUrl:config.proxyUrl,url:config.urlHeader+config.inters.index.getMarquee,data:a,success:function(n){n.data&&n.data.result&&(e=[].concat(n.data.result))},always:function(){"function"==typeof n&&n.apply({},[e])}})}function o(n){if(n){var a=$("#marquee"),e=a.find("ul");if(Array.isArray(n)){for(var o=0,i=n.length;o<i;o++){var t=n[o],r="",l="",s="",u="",p="";s=t.stockName||"--",l=t.stockCode||"--",u=t.currentPrice||"--",p=t.rise||"--",r="1"===t.riseFlag?"rise-up":"0"===t.riseFlag?"fall-down":parseFloat(t.rise)<0?"fall-down":"rise-up";var c=$("#model-marquee-item").html();c=c.replace(/\{\{\:name}\}/g,s),c=c.replace(/\{\{\:stCode}\}/g,l),c=c.replace(/\{\{\:index}\}/g,u),c=c.replace(/\{\{\:ratio}\}/g,p),c=c.replace(/\{\{\:ifRaise}\}/g,r),e.append($(c))}i>0&&a.slideDown()}}}function i(){var n=$("#marquee"),a=n.find("ul");if($(n).width()<$(a).width()&&p){$(n).css({position:"relative"}),$(a).css({position:"relative"});var e=$(a).offset().left-$(n).offset().left,o=a.children()[0],i=$(o)[0].clientWidth;"appended"!==$(n).attr("data-appended")&&($(a).append($(o).clone(!0)),$(n).attr("data-appended","appended")),$(a).css({left:e-d+"px"}),0-e+d>i&&($(n).attr("data-appended",""),$(o).remove(),$(a).css({left:e-d+i+"px"}))}}function t(){void 0===f.companyCount&&(f.companyCount=echarts.init($("#company").find(".canvas-wrapper")[0])),f.companyCount.showLoading(),void 0===f.hill&&(f.hill=echarts.init($("#org").find(".canvas-wrapper")[0])),f.hill.showLoading();var n={isReduce:config.isReduce};syAjax({ifProxy:!0,proxyUrl:config.proxyUrl,url:config.urlHeader+config.inters.index.getCountMarket,data:n,success:function(n){var a=n.data||{};a=a.data_result||{};var e=$("#org"),o=$("#company"),i=(e.find(".count-item"),o.find(".count-item"),void 0===a.n_company?"":a.n_company),t=void 0===a.n_investor?"":a.n_investor;r(i,o),r(t,e),l(a),s(a)},always:function(){f.hill.hideLoading(),f.companyCount.hideLoading();var n=$("#company").find(".detail-count"),a=0,e=0;for(a=0,e=n.length;a<e;a++)$(n[a]).css({"margin-left":Math.ceil(0-n[a].clientWidth/2)+"px"})}})}function r(n,a){n=parseInt(n);var e=$(a).find(".count-summary");if(!1===isNaN(n)){var o=e.find("ul");n+="";for(var i=0,t=n.length;i<t;i++)o.append($('<li class="num-cell"><span>'+n.slice(i,i+1)+"</span></li>")),(t-i)%3==1&&i<t-1&&o.append($('<li class="sp-cell"><span>,</span></li>'))}else e.addClass("hide")}function l(n){var a=void 0===n.n_a_company?0:n.n_a_company,e=void 0===n.n_3rd_company?0:n.n_3rd_company,o=void 0===n.n_4th_company?0:n.n_4th_company,i=void 0===n.n_other_invested_company?0:n.n_other_invested_company,t=void 0===n.n_other_company?0:n.n_other_company,r=void 0===n.n_us?0:n.n_us,l=void 0===n.n_ipo_us?0:n.n_ipo_us,s=void 0===n.n_hk?0:n.n_hk,u=void 0===n.n_ipo_hk?0:n.n_ipo_hk,p=(void 0===n.n_apply_ipo_company||n.n_apply_ipo_company,void 0===n.n_prepare_ipo_company?0:n.n_prepare_ipo_company),c=void 0===n.n_prepare_third_company?0:n.n_prepare_third_company,d=(void 0===n.n_city_national_company||n.n_city_national_company,void 0===n.n_province_national_company||n.n_province_national_company,void 0===n.n_center_national_company||n.n_center_national_company,void 0===n.n_gov_licence_company?0:n.n_gov_licence_company),_=void 0===n.n_high_new_company?0:n.n_high_new_company,v=(void 0===n.n_city_reward_company||n.n_city_reward_company,void 0===n.n_province_reward_company||n.n_province_reward_company,void 0===n.n_center_reward_company||n.n_center_reward_company,void 0===n.n_national_company?0:n.n_national_company),m=void 0===n.n_foreign_invested?0:n.n_foreign_invested,h=void 0===n.n_finance_holdings_company?0:n.n_finance_holdings_company,y=void 0===n.n_private_industry?0:n.n_private_industry,g=void 0===n.n_standard?0:n.n_standard,w=void 0===n.n_authority?0:n.n_authority,b=void 0===n.n_reward_company?0:n.n_reward_company,x=void 0===n.n_mbp?0:n.n_mbp,k={trigger:"axis",formatter:function(n){var a="";n[0]=n[0]||{};var e=n[0].name||"",o=n[0].data||{};return o=o.data||0,e.length>0&&(a+=e+" : "+o+"家"),a}},C={show:!1,top:10,left:160,right:40,bottom:40},I=[{show:!1}],L=[{type:"category",axisLabel:{color:"#666",interval:0},axisLine:{lineStyle:{color:"#999",width:1}},axisTick:{show:!1},splitLine:{show:!1},data:[]}],A=[{type:"bar",barWidth:20,barMinHeight:3,data:[],xAxisIndex:0,yAxisIndex:0,itemStyle:{color:"#14b8d4"},emphasis:{itemStyle:{color:"#14b8d4"}}}],P=[];P.push({name:"A股公司",value:a}),P.push({name:"A股拟IPO公司",value:p}),P.push({name:"三板公司",value:e}),P.push({name:"三板拟挂牌公司",value:c}),P.push({name:"四板公司",value:o}),P.push({name:"已私募融资公司",value:i}),P.push({name:"非挂牌非上市公司",value:t}),P.push({name:"美股公司",value:r}),P.push({name:"美股拟IPO公司",value:l}),P.push({name:"港股公司",value:s}),P.push({name:"港股拟IPO公司",value:u}),P.push({name:"外商投资企业",value:m}),P.push({name:"国有企业",value:v}),P.push({name:"金融控股集团",value:h}),P.push({name:"民营产业集团",value:y}),P.push({name:"高新技术企业",value:_}),P.push({name:"专项证照企业",value:d}),P.push({name:"政府奖励企业",value:b}),P.push({name:"标准制定企业",value:g}),P.push({name:"权威榜单企业",value:w}),P.push({name:"重大在建项目企业",value:x});var q=0,M=0,O=0,S=0,F=[];for(P=P.reverse(),O=0,S=P.length;O<S;O++)0===O?(q=P[O].value,M=P[O].value):(q=Math.max(q,P[O].value),M=Math.min(M,P[O].value)),F.push(P[O].name);for(L[0].data=[].concat(F),O=0,S=P.length;O<S;O++)if(P[O].data=P[O].value,P[O].label={normal:{show:!1,position:"top",color:"#666",formatter:P[O].data+"家"}},P[O].value>0){var U=q/P[O].value;U=U<5?1:U<10?2.5:U<50?3:U<100?5:U<300?10:U<1e3?25:U<5e3?60:100,100===U?P[O].value=q/U:P[O].value*=U,P[O].value=parseInt(P[O].value)}A[0].data=[].concat(P);var N={tooltip:k,grid:C,xAxis:I,yAxis:L,series:A,color:["#14b8d4"]};f.companyCount.setOption(N),$("#company").find(".label-group-wrapper").removeClass("hide")}function s(n){if(!1===$.isEmptyObject(n)){var a=n.n_private_fund_manager||0,e=n.n_public_fund_manager||0,o=n.n_broker||0,i=n.n_future||0,t=(n.n_zfyd,n.n_invest_company_of_broker||0),r=n.n_development_bank||0,l=n.n_policy_bank||0,s=n.n_asset_management_company||0,u=n.n_financial_lease_company||0,p=n.n_large_commercial_bank||0,c=n.n_joint_stock_commercial_bank||0,d=n.n_private_bank||0,_=n.n_rural_commercial_bank||0,v=n.n_foreign_bank||0,m=n.n_city_commercial_bank||0,h=n.n_national_investment_platform||0,y=n.n_investment_consult_company||0,g=n.n_trust_company||0,w=n.n_finance_company||0,b=n.n_insurance_company||0,x=n.n_insurance_asset_company||0,k=n.n_gov_gx_invest_company||0,C=n.n_gov_cy_invest_company||0,I=n.n_finance_holdings_company||0,L=n.n_fund_of_fund||0,A=n.n_private_fund_manager_u||0,P=n.n_unrecorded_other_asset||0,q={trigger:"axis",formatter:function(n){var a="";n[0]=n[0]||{};var e=n[0].name||"",o=n[0].data||{};return o=o.data||0,e.length>0&&(a+=e+" : "+o+"家"),a}},M={show:!1,top:10,left:160,right:40,bottom:40},O=[{show:!1}],S=[{type:"category",min:0,position:"left",axisLabel:{color:"#666"},axisLine:{lineStyle:{color:"#999",width:1}},axisTick:{show:!1},splitLine:{show:!1},data:[]}],F=[{type:"bar",barWidth:20,data:[],itemStyle:{color:"#14b8d4"},emphasis:{itemStyle:{color:"#14b8d4"}}}],U=[];U.push({name:"已备案私募管理人",value:a}),U.push({name:"未备案私募管理人",value:A}),U.push({name:"母基金",value:L}),U.push({name:" 券商直投子公司",value:t}),U.push({name:"公募基金管理人",value:e}),U.push({name:"证券公司",value:o}),U.push({name:"期货公司",value:i}),U.push({name:"证券投资咨询公司",value:y}),U.push({name:"开发性金融机构",value:r}),U.push({name:"政策性银行",value:l}),U.push({name:"金融资产管理公司",value:s}),U.push({name:"金融租赁公司",value:u}),U.push({name:"大型商业银行",value:p}),U.push({name:"股份制商业银行",value:c}),U.push({name:"民营银行",value:d}),U.push({name:"农村商业银行",value:_}),U.push({name:"外资银行",value:v}),U.push({name:"城市商业银行",value:m}),U.push({name:"信托公司",value:g}),U.push({name:"集团财务公司",value:w}),U.push({name:"政府高新投资平台",value:k}),U.push({name:"政府产业引导基金",value:C}),U.push({name:"金融控股集团",value:I}),U.push({name:"国家投资平台",value:h}),U.push({name:"未备案三类资产",value:P}),U.push({name:"保险公司",value:b}),U.push({name:"保险资产管理公司",value:x});for(var N=0,R=U.length;N<R;N++){if(S[0].data.unshift(U[N].name),U[N].data=U[N].value,U[N].value>0){var T=A/U[N].value;T=T<5?1:T<10?2.5:T<50?3:T<100?5:T<300?10:100,100===T?U[N].value=A/T:U[N].value*=T,U[N].value=parseInt(U[N].value)}F[0].data.unshift(U[N])}var j={tooltip:q,grid:M,xAxis:O,yAxis:S,series:F,color:["#14b8d4"]};f.hill.setOption(j),$("#org").find(".label-group-wrapper").removeClass("hide")}}function u(){for(var n in f)f.hasOwnProperty(n)&&f[n].resize&&f[n].resize()}var p=!0,c=!0,d=1,_=40,v=[],m=2e4,h=[],f={},y=null;+function(){recordUserViewLog("首页"),(SYUtils.LocalInfoManager.getLocalInfo("getNew")||"")+""!="1"&&$(".nav-block-11").addClass("hasNew"),n(),t(),$(".nav-inner-block").on({mouseenter:function(){null!==y&&(window.clearTimeout(y),y=null),y=window.setTimeout(function(n){$(".nav-inner-group").find(".block-detail").removeClass("detail-enter"),$("#"+n).addClass("detail-enter")},300,$(this).attr("data-refer"))}}),$(".nav-inner-group").on({mouseleave:function(){null!==y&&(window.clearTimeout(y),y=null),$(".nav-inner-group").find(".block-detail").removeClass("detail-enter")}}),$(".block-detail").on({mouseleave:function(){$(this).removeClass("detail-enter")}}),$("body").on({click:function(){$(".search-wrapper").find(".ui-input-list").addClass("hide")}}),$(window).on({focus:function(n){n=n||window.event;for(var e=0,o=h.length;e<o;e++)window.clearInterval(h[e]);h=[],c=!0,a(),h.push(window.setInterval(a,m)),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},blur:function(n){n=n||window.event,c=!1,n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},resize:function(){u()}})}()});